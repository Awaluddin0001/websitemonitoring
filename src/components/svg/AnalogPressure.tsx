import React, { useEffect, useRef } from "react";
import "./AnalogPressure.css";

function AnalogPressure({ volume, color }: { volume: number; color: string }) {
  const jarumRef = useRef<SVGPathElement>(null);

  useEffect(() => {
    if (jarumRef.current) {
      // volume should be a number between 0 and 100
      const clampedVolume = Math.max(0, Math.min(100, volume));
      // Calculate the rotation degree based on volume
      const degree = (clampedVolume / 100) * 170 - 90; // From -90 (9 o'clock) to +90 (3 o'clock)
      jarumRef.current.style.transform = `rotate(${degree}deg)`;
    }
  }, [volume]);

  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      width="420"
      height="226"
      fill="none"
      viewBox="0 0 420 226"
    >
      <g>
        <g>
          <path
            ref={jarumRef}
            className="jarum"
            fill="#4E5558"
            fillRule="evenodd"
            d="M204.971 205.82a9.805 9.805 0 01-1.031-16.817l5.689-106.437 5.702 106.679a9.794 9.794 0 013.942 7.858 9.812 9.812 0 01-5.353 8.74l.773 19.657-5.408-5.984-5.353 5.738 1.039-19.434zm4.495-13.037a4.321 4.321 0 014.321 4.32 4.322 4.322 0 01-4.321 4.32 4.321 4.321 0 010-8.64z"
            clipRule="evenodd"
          ></path>
        </g>
        <g>
          <path
            fill={color}
            d="M10.838 205.33c1.211-51.3 21.758-99.35 58.17-135.763 37.549-37.549 87.474-58.229 140.576-58.229 53.103 0 103.028 20.68 140.576 58.229 36.413 36.413 56.96 84.463 58.17 135.763h10.837c-1.211-54.196-22.882-104.967-61.343-143.427C318.228 22.306 265.582.5 209.584.5c-55.997 0-108.643 21.806-148.24 61.403C22.884 100.363 1.213 151.134 0 205.33h10.838z"
          ></path>
          <path
            fill="#4E5558"
            d="M211.11 22.966h-3.051v33.403h3.051V22.966z"
          ></path>
          <path
            fill="#4E5558"
            d="M344.394 135.081l-1.525-2.638 28.929-16.704 1.526 2.639-28.93 16.703z"
          ></path>
          <path
            fill="#4E5558"
            d="M288.3 77.87l-2.639-1.526 16.702-28.932 2.64 1.525L288.3 77.87z"
          ></path>
          <path
            fill="#4E5558"
            d="M74.775 135.081l-28.929-16.703 1.525-2.639L76.3 132.443l-1.525 2.638z"
          ></path>
          <path
            fill="#4E5558"
            d="M130.869 77.87l-16.702-28.933 2.639-1.525 16.702 28.932-2.639 1.526z"
          ></path>
          <path
            fill="#4E5558"
            d="M189.736 36.88l-1.337-12.722 3.032-.322 1.338 12.723-3.033.321z"
          ></path>
          <path
            fill="#4E5558"
            d="M171.624 39.907l-2.657-12.516 2.986-.63 2.656 12.514-2.985.632z"
          ></path>
          <path
            fill="#4E5558"
            d="M153.934 44.815l-3.95-12.17 2.901-.94 3.949 12.169-2.9.941z"
          ></path>
          <path
            fill="#4E5558"
            d="M136.85 51.543l-5.198-11.69 2.788-1.24 5.197 11.69-2.787 1.24z"
          ></path>
          <path
            fill="#4E5558"
            d="M229.432 36.88l-3.032-.321 1.337-12.723 3.033.321-1.338 12.723z"
          ></path>
          <path
            fill="#4E5558"
            d="M247.544 39.907l-2.985-.632 2.656-12.515 2.986.631-2.657 12.516z"
          ></path>
          <path
            fill="#4E5558"
            d="M265.235 44.815l-2.901-.941 3.95-12.17 2.9.941-3.949 12.17z"
          ></path>
          <path
            fill="#4E5558"
            d="M282.319 51.543l-2.788-1.24 5.198-11.69 2.788 1.24-5.198 11.69z"
          ></path>
          <path
            fill="#4E5558"
            d="M384.177 194.336l-.323-3.033 12.724-1.338.322 3.033-12.723 1.338z"
          ></path>
          <path
            fill="#4E5558"
            d="M381.46 176.177l-.631-2.985 12.515-2.656.631 2.983-12.515 2.658z"
          ></path>
          <path
            fill="#4E5558"
            d="M376.862 158.401l-.942-2.9 12.171-3.95.94 2.9-12.169 3.95z"
          ></path>
          <path
            fill="#4E5558"
            d="M370.431 141.203l-1.238-2.787 11.69-5.198 1.238 2.789-11.69 5.196z"
          ></path>
          <path
            fill="#4E5558"
            d="M106.638 69.144L99.221 58.72l2.485-1.77 7.415 10.422-2.483 1.77z"
          ></path>
          <path
            fill="#4E5558"
            d="M92.356 80.684l-8.467-9.593 2.286-2.02 8.469 9.593-2.288 2.02z"
          ></path>
          <path
            fill="#4E5558"
            d="M79.361 93.65l-9.42-8.654L72 82.751l9.42 8.653-2.06 2.247z"
          ></path>
          <path
            fill="#4E5558"
            d="M67.79 107.91l-10.272-7.628 1.816-2.449 10.273 7.628-1.817 2.449z"
          ></path>
          <path
            fill="#4E5558"
            d="M353.363 110.689l-1.77-2.484 10.425-7.42 1.768 2.484-10.423 7.42z"
          ></path>
          <path
            fill="#4E5558"
            d="M342.071 96.207l-2.019-2.287 9.593-8.465 2.02 2.287-9.594 8.465z"
          ></path>
          <path
            fill="#4E5558"
            d="M329.33 82.989l-2.246-2.062 8.654-9.42 2.248 2.061-8.656 9.42z"
          ></path>
          <path
            fill="#4E5558"
            d="M315.279 71.174l-2.449-1.818 7.624-10.271 2.449 1.816-7.624 10.273z"
          ></path>
          <path
            fill="#4E5558"
            d="M34.992 194.336l-12.723-1.338.322-3.033 12.724 1.338-.323 3.033z"
          ></path>
          <path
            fill="#4E5558"
            d="M37.708 176.177l-12.514-2.658.63-2.983 12.516 2.656-.632 2.985z"
          ></path>
          <path
            fill="#4E5558"
            d="M42.307 158.401l-12.17-3.95.942-2.9 12.17 3.95-.942 2.9z"
          ></path>
          <path
            fill="#4E5558"
            d="M48.738 141.203l-11.69-5.196 1.238-2.789 11.69 5.198-1.238 2.787z"
          ></path>
        </g>
      </g>
    </svg>
  );
}

export default AnalogPressure;
